#!/usr/bin/env bash

source /usr/local/bin/virtualenvwrapper.sh

interpreter="interpreter.py"
lisp="src/core.lisp"

if [[ $VIRTUAL_ENV ]]; then
  python $interpreter $lisp
else
  if lsvirtualenv | grep lisp; then
    workon lisp
    python $interpreter -f $lisp
  else
    mkvirtualenv lisp --python=$(which python3)
    python $interpreter -f $lisp
  fi
fi

